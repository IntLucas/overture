<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

	<!--
		Specify content type and related editor id to be used by the source
		viewer in debug when a breakpoint is reached
	-->
	<extension point="org.overture.ide.debug.sourceviewerEditor">
		<SourceViewerEditor 
			ContentTypeId="org.overture.ide.vdmpp.content-type"
			EditorId="org.overture.ide.vdmpp.ui.VdmPpEditor">
		</SourceViewerEditor>
	</extension>

	<!-- Declare launch configuration type -->
	<extension point="org.eclipse.debug.core.launchConfigurationTypes">
		<launchConfigurationType
			delegate="org.overture.ide.debug.core.launching.VdmLaunchConfigurationDelegate"
			id="org.overture.ide.vdmpp.debug.launchConfigurationType" 
			modes="debug"
			name="VDM PP Model" 
			public="true" 
			sourceLocatorId="org.overture.ide.debug.sourceLocator"
			sourcePathComputerId="org.overture.ide.debug.sourcePathComputer">
		</launchConfigurationType>
	</extension>

	<!-- Add the launch config group to the launch dialog -->
	<extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
		<launchConfigurationTabGroup
			class="org.overture.ide.vdmpp.debug.ui.launching.VdmPpLaunchConfigurationTabGroup"
			description="VDM-PP Launch Tab" 
			id="org.overture.ide.debug.ui.launchConfigurationTabGroup"
			type="org.overture.ide.vdmpp.debug.launchConfigurationType">
		</launchConfigurationTabGroup>
	</extension>

	<!--
		Declare a icon for a launch config type, this is e.g. used in the
		launch config dialog
	-->
	<extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
		<launchConfigurationTypeImage
			configTypeID="org.overture.ide.vdmpp.debug.launchConfigurationType"
			icon="icons/cview16/vdmpp_file_tsk.png" 
			id="org.overture.ide.debug.ui.launchConfigurationTypeImage">
		</launchConfigurationTypeImage>
	</extension>
	
	
	<!-- Shoutcut for launching project. Extends the Debug and Run context menu in the VDM Explorer -->
 <extension point="org.eclipse.debug.ui.launchShortcuts">
  <shortcut
     id="org.overture.ide.debug.ui.localVdmShortcut"
     modes="run,debug"
     class="org.overture.ide.vdmpp.debug.ui.launchconfigurations.VdmApplicationLaunchShortcut"
     label="Vdm Application"
     icon="icons/cview16/vdmpp_file_tsk.png">
     <contextualLaunch>
           <enablement>
             <with variable="selection">
             <count value="1"/>
                <iterate>
                	<and>
                		<instanceof value="org.eclipse.core.resources.IProject"></instanceof>
                		<and>
							<adapt type="org.eclipse.core.resources.IProject" />
							<test property="org.eclipse.core.resources.open" value="true"/>
						</and>
                	</and>
                </iterate>
           	</with>
           </enablement>
  		 </contextualLaunch>
  </shortcut>
 </extension>
	

</plugin>
