["gk_subs_max:nat1 \u003d 1","fp_subs_max:nat1 \u003d 2","player \u003d player","state R_Bookof\n[on_field_players : set of (player), potential_substitutes : set of (player), goalkeeper : player, nb_gk_subs : nat, nb_fp_subs : nat]\n\tinv mk_R_Book(ofp, ps, gk, ngk, nfp) \u003d\u003d (leq_eleven_players(ofp) and (within_allowed_limits(ngk, nfp) and ((gk not in set ps) and ((ofp inter ps) \u003d {}))))\n\tinit r \u003d\u003d (r \u003d mk_R_Book({1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}, {12, 13, 14, 15, 16}, 1, 0, 0))","private leq_eleven_players: (set of (player) +\u003e bool)\n\tleq_eleven_players(f) \u003d\u003d\n((card f) \u003c\u003d 11)","private within_allowed_limits: (nat * nat +\u003e bool)\n\twithin_allowed_limits(ngk, nfp) \u003d\u003d\n((ngk \u003c\u003d gk_subs_max) and (nfp \u003c\u003d fp_subs_max))","RED_CARD([p]player)\n\text [wr[on_field_players]set of (player), wr[potential_substitutes]set of (player)]\n\tpre ((p in set on_field_players) or (p in set potential_substitutes))\n\tpost ((on_field_players \u003d (on_field_players~ \\ {p})) and (potential_substitutes \u003d (potential_substitutes~ \\ {p})))","CHANGE_GOALKEEPER([p]player)\n\text [wr[goalkeeper]player, rd[on_field_players]set of (player)]\n\tpre (p in set on_field_players)\n\tpost (goalkeeper \u003d p)","SUBSTITUTION([pl]player, [subs]player)\n\text [wr[on_field_players]set of (player), wr[potential_substitutes]set of (player), wr[goalkeeper]player, wr[nb_gk_subs]nat, wr[nb_fp_subs]nat]\n\tpre ((pl in set on_field_players) and ((subs in set potential_substitutes) and (((pl \u003d goalkeeper) \u003d\u003e within_allowed_limits((nb_gk_subs + 1), nb_fp_subs)) and ((pl \u003c\u003e goalkeeper) \u003d\u003e within_allowed_limits(nb_gk_subs, (nb_fp_subs + 1))))))\n\tpost ((on_field_players \u003d ((on_field_players~ union {subs}) \\ {pl})) and ((potential_substitutes \u003d (potential_substitutes~ \\ {subs})) and (((pl \u003d goalkeeper~) \u003d\u003e ((goalkeeper \u003d subs) and ((nb_gk_subs \u003d (nb_gk_subs~ + 1)) and (nb_fp_subs \u003d nb_fp_subs~)))) and ((pl \u003c\u003e goalkeeper~) \u003d\u003e ((goalkeeper \u003d goalkeeper~) and ((nb_gk_subs \u003d nb_gk_subs~) and (nb_fp_subs \u003d (nb_fp_subs~ + 1))))))))","SUBSTITUTION_GK([pl]player, [subs]player)\n\text [wr[on_field_players]set of (player), wr[potential_substitutes]set of (player), wr[goalkeeper]player, wr[nb_gk_subs]nat, rd[nb_fp_subs]nat]\n\tpre ((pl in set on_field_players) and ((subs in set potential_substitutes) and ((pl \u003d goalkeeper) and within_allowed_limits((nb_gk_subs + 1), nb_fp_subs))))\n\tpost ((on_field_players \u003d ((on_field_players~ union {subs}) \\ {pl})) and ((potential_substitutes \u003d (potential_substitutes~ \\ {subs})) and ((goalkeeper \u003d subs) and (nb_gk_subs \u003d (nb_gk_subs~ + 1)))))","SUBSTITUTION_FP([pl]player, [subs]player)\n\text [wr[on_field_players]set of (player), wr[potential_substitutes]set of (player), rd[goalkeeper]player, rd[nb_gk_subs]nat, wr[nb_fp_subs]nat]\n\tpre ((pl in set on_field_players) and ((subs in set potential_substitutes) and ((pl \u003c\u003e goalkeeper) and within_allowed_limits(nb_gk_subs, (nb_fp_subs + 1)))))\n\tpost ((on_field_players \u003d ((on_field_players~ union {subs}) \\ {pl})) and ((potential_substitutes \u003d (potential_substitutes~ \\ {subs})) and (nb_fp_subs \u003d (nb_fp_subs~ + 1))))","SUBSTITUTION_EXPL (player * player \u003d\u003d\u003e ())\n\tSUBSTITUTION_EXPL(pl, subs) \u003d\u003d\nif (pl \u003d goalkeeper)\nthen\nSUBSTITUTION_GK(pl, subs)else\nSUBSTITUTION_FP(pl, subs)\n\tpre (((pl \u003d goalkeeper) \u003d\u003e pre_SUBSTITUTION_GK(pl, subs, mk_R_Book(on_field_players, potential_substitutes, goalkeeper, nb_gk_subs, nb_fp_subs))) and ((pl \u003c\u003e goalkeeper) \u003d\u003e pre_SUBSTITUTION_FP(pl, subs, mk_R_Book(on_field_players, potential_substitutes, goalkeeper, nb_gk_subs, nb_fp_subs))))","gk_subs_max:nat1 \u003d 1","fp_subs_max:nat1 \u003d 2","player \u003d player","state R_Bookof\n[on_field_players : set of (player), potential_substitutes : set of (player), goalkeeper : player, nb_gk_subs : nat, nb_fp_subs : nat]\n\tinv mk_R_Book(ofp, ps, gk, ngk, nfp) \u003d\u003d (leq_eleven_players(ofp) and (within_allowed_limits(ngk, nfp) and ((gk not in set ps) and ((ofp inter ps) \u003d {}))))\n\tinit r \u003d\u003d (r \u003d mk_R_Book({1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}, {12, 13, 14, 15, 16}, 1, 0, 0))","private leq_eleven_players: (set of (player) +\u003e bool)\n\tleq_eleven_players(f) \u003d\u003d\n((card f) \u003c\u003d 11)","private within_allowed_limits: (nat * nat +\u003e bool)\n\twithin_allowed_limits(ngk, nfp) \u003d\u003d\n((ngk \u003c\u003d gk_subs_max) and (nfp \u003c\u003d fp_subs_max))","RED_CARD (player \u003d\u003d\u003e ())\n\tRED_CARD(p) \u003d\u003d\n(\n\non_field_players :\u003d (on_field_players \\ {p});\npotential_substitutes :\u003d (potential_substitutes \\ {p})\n)\n\tpre ((p in set on_field_players) or (p in set potential_substitutes))\n\tpost ((on_field_players \u003d (on_field_players~ \\ {p})) and (potential_substitutes \u003d (potential_substitutes~ \\ {p})))","CHANGE_GOALKEEPER (player \u003d\u003d\u003e ())\n\tCHANGE_GOALKEEPER(p) \u003d\u003d\n(\n\ngoalkeeper :\u003d p\n)\n\tpre (p in set on_field_players)\n\tpost (goalkeeper \u003d p)","SUBSTITUTION (player * player \u003d\u003d\u003e ())\n\tSUBSTITUTION(pl, subs) \u003d\u003d\n(\n\non_field_players :\u003d ((on_field_players union {subs}) \\ {pl});\npotential_substitutes :\u003d (potential_substitutes \\ {subs});\nif (pl \u003d goalkeeper)\nthen\n(\n\ngoalkeeper :\u003d subs;\nnb_gk_subs :\u003d (nb_gk_subs + 1)\n)else\nnb_fp_subs :\u003d (nb_fp_subs + 1)\n)\n\tpre ((pl in set on_field_players) and ((subs in set potential_substitutes) and (((pl \u003d goalkeeper) \u003d\u003e within_allowed_limits((nb_gk_subs + 1), nb_fp_subs)) and ((pl \u003c\u003e goalkeeper) \u003d\u003e within_allowed_limits(nb_gk_subs, (nb_fp_subs + 1))))))\n\tpost ((on_field_players \u003d ((on_field_players~ union {subs}) \\ {pl})) and ((potential_substitutes \u003d (potential_substitutes~ \\ {subs})) and (((pl \u003d goalkeeper~) \u003d\u003e ((goalkeeper \u003d subs) and ((nb_gk_subs \u003d (nb_gk_subs~ + 1)) and (nb_fp_subs \u003d nb_fp_subs~)))) and ((pl \u003c\u003e goalkeeper~) \u003d\u003e ((goalkeeper \u003d goalkeeper~) and ((nb_gk_subs \u003d nb_gk_subs~) and (nb_fp_subs \u003d (nb_fp_subs~ + 1))))))))","SUBSTITUTION_GK (player * player \u003d\u003d\u003e ())\n\tSUBSTITUTION_GK(pl, subs) \u003d\u003d\n(\n\non_field_players :\u003d ((on_field_players union {subs}) \\ {pl});\npotential_substitutes :\u003d (potential_substitutes \\ {subs});\ngoalkeeper :\u003d subs;\nnb_gk_subs :\u003d (nb_gk_subs + 1)\n)\n\tpre ((pl in set on_field_players) and ((subs in set potential_substitutes) and ((pl \u003d goalkeeper) and within_allowed_limits((nb_gk_subs + 1), nb_fp_subs))))\n\tpost ((on_field_players \u003d ((on_field_players~ union {subs}) \\ {pl})) and ((potential_substitutes \u003d (potential_substitutes~ \\ {subs})) and ((goalkeeper \u003d subs) and (nb_gk_subs \u003d (nb_gk_subs~ + 1)))))","SUBSTITUTION_FP (player * player \u003d\u003d\u003e ())\n\tSUBSTITUTION_FP(pl, subs) \u003d\u003d\n(\n\non_field_players :\u003d ((on_field_players union {subs}) \\ {pl});\npotential_substitutes :\u003d (potential_substitutes \\ {subs});\nnb_fp_subs :\u003d (nb_fp_subs + 1)\n)\n\tpre ((pl in set on_field_players) and ((subs in set potential_substitutes) and ((pl \u003c\u003e goalkeeper) and within_allowed_limits(nb_gk_subs, (nb_fp_subs + 1)))))\n\tpost ((on_field_players \u003d ((on_field_players~ union {subs}) \\ {pl})) and ((potential_substitutes \u003d (potential_substitutes~ \\ {subs})) and (nb_fp_subs \u003d (nb_fp_subs~ + 1))))","SUBSTITUTION_EXPL (player * player \u003d\u003d\u003e ())\n\tSUBSTITUTION_EXPL(pl, subs) \u003d\u003d\nif (pl \u003d goalkeeper)\nthen\nSUBSTITUTION_GK(pl, subs)else\nSUBSTITUTION_FP(pl, subs)\n\tpre (((pl \u003d goalkeeper) \u003d\u003e pre_SUBSTITUTION_GK(pl, subs, mk_R_Book(on_field_players, potential_substitutes, goalkeeper, nb_gk_subs, nb_fp_subs))) and ((pl \u003c\u003e goalkeeper) \u003d\u003e pre_SUBSTITUTION_FP(pl, subs, mk_R_Book(on_field_players, potential_substitutes, goalkeeper, nb_gk_subs, nb_fp_subs))))"]