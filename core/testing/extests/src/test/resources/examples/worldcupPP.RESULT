["class File\nprivate  data:seq of (char) :\u003d \"\"\npublic  write(seq of (char)) (seq of (char) \u003d\u003d\u003e ())\n\twrite(seq of (char))(chs) \u003d\u003d\ndata :\u003d chs\nend File\n","class Filename\npublic  get_file() (() \u003d\u003d\u003e File)\n\tget_file()() \u003d\u003d\nis not yet specified\npublic  put_file(File) (File \u003d\u003d\u003e ())\n\tput_file(File)(f) \u003d\u003d\nis not yet specified\nend Filename\n","class URL\npublic  translate() (() \u003d\u003d\u003e Filename)\n\ttranslate()() \u003d\u003d\nis not yet specified\nend URL\n","class Webserver\nprivate  private execute_script: (File -\u003e File)\n\texecute_script(f) \u003d\u003d\nis not yet specified\nprivate  site_map:map (URL) to (Filename) :\u003d {|-\u003e}\nprivate  ExecuteCGI(URL) (URL \u003d\u003d\u003e File)\n\tExecuteCGI(URL)(url) \u003d\u003d\nlet CGI_script \u003d (site_map(url).get_file)() in return (execute_script(CGI_script))\n\tpre (url in set (dom site_map))\nprivate  RetrieveURL(URL) (URL \u003d\u003d\u003e File)\n\tRetrieveURL(URL)(url) \u003d\u003d\nreturn ((site_map(url).get_file)())\n\tpre (url in set (dom site_map))\nprivate  UploadFile(File, URL) (File * URL \u003d\u003d\u003e ())\n\tUploadFile(File, URL)(file, url) \u003d\u003d\n(\n\nurl.translate().put_file(file);\nsite_map :\u003d (site_map ++ {url |-\u003e (url.translate)()})\n)\nprivate  ServerBusy() (() \u003d\u003d\u003e File)\n\tServerBusy()() \u003d\u003d\n(\nf:File :\u003d new File()\n\nf.write(((\"\u003chtml\u003e\u003ctitle\u003eServer Busy\u003c/title\u003e\" ^ \"\u003cbody\u003e\u003ch3\u003eServer busy\u003c/h3\u003e Please try again later\u003c/body\u003e\") ^ \"\u003c/html\u003e\"));\nreturn (f)\n)\nprivate  DeleteURL(URL) (URL \u003d\u003d\u003e ())\n\tDeleteURL(URL)(url) \u003d\u003d\nsite_map :\u003d ({url} \u003c-: site_map)\nprivate  per RetrieveURL \u003d\u003e ((#active[RetrieveURL] + #active[ExecuteCGI]) \u003c 10)\nprivate  per ExecuteCGI \u003d\u003e ((#active[RetrieveURL] + #active[ExecuteCGI]) \u003c 10)\nprivate  per ServerBusy \u003d\u003e ((#waiting[RetrieveURL] + #waiting[ExecuteCGI]) \u003e\u003d 100)\nprivate  per DeleteURL \u003d\u003e ((dom site_map) \u003c\u003e {})\nend Webserver\n"]